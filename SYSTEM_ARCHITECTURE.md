# Custom Frame System - Architecture Diagram

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CUSTOMER FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Customer  â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ /custom-frame   â”‚ â—„â”€â”€â”€ Main Page
    â”‚                 â”‚
    â”‚ â€¢ Upload Image  â”‚
    â”‚ â€¢ Select Size   â”‚
    â”‚ â€¢ Select Style  â”‚
    â”‚ â€¢ Add Notes     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚                  â”‚
             â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ POST /api/     â”‚   â”‚ Live Preview â”‚
    â”‚ upload/custom  â”‚   â”‚   Component  â”‚
    â”‚                â”‚   â”‚              â”‚
    â”‚ Cloudinary â”€â”€â”€â”€â”¼â”€â”€â”€â”¤ â€¢ CSS Frame  â”‚
    â”‚ Upload         â”‚   â”‚ â€¢ Image      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â€¢ Real-time  â”‚
             â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Image URL     â”‚
    â”‚  Returned      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Add to Cart   â”‚
    â”‚  (Zustand)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   /checkout    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ POST /api/     â”‚
    â”‚ custom-frame-  â”‚
    â”‚ order          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  MongoDB       â”‚
    â”‚  Order Saved   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Razorpay      â”‚
    â”‚  Payment       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Order Complete â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ADMIN FLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    Admin    â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ /admin/custom-     â”‚
    â”‚ orders             â”‚
    â”‚                    â”‚
    â”‚ â€¢ View Orders      â”‚
    â”‚ â€¢ See Stats        â”‚
    â”‚ â€¢ Download Images  â”‚
    â”‚ â€¢ Update Status    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                  â”‚
               â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ GET /api/        â”‚   â”‚ PATCH /api/      â”‚
    â”‚ custom-frame-    â”‚   â”‚ custom-frame-    â”‚
    â”‚ order            â”‚   â”‚ order/[id]       â”‚
    â”‚                  â”‚   â”‚                  â”‚
    â”‚ Fetch All Orders â”‚   â”‚ Update Status    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                      â”‚
             â–¼                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Display       â”‚       â”‚  Status      â”‚
    â”‚  Orders        â”‚       â”‚  Updated     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATA FLOW DIAGRAM                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Customer                    Frontend                Backend
   â”‚                           â”‚                        â”‚
   â”‚  1. Upload Image          â”‚                        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
   â”‚                           â”‚  2. POST /upload       â”‚
   â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                           â”‚                        â”‚  3. Cloudinary
   â”‚                           â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                           â”‚                        â”‚         â”‚
   â”‚                           â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                           â”‚  4. Image URL          â”‚
   â”‚  5. Preview               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
   â”‚                           â”‚                        â”‚
   â”‚  6. Select Options        â”‚                        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
   â”‚                           â”‚                        â”‚
   â”‚  7. Add to Cart           â”‚                        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
   â”‚                           â”‚  8. Store in Zustand   â”‚
   â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
   â”‚                           â”‚         â”‚              â”‚
   â”‚                           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
   â”‚                           â”‚                        â”‚
   â”‚  9. Checkout              â”‚                        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
   â”‚                           â”‚  10. Create Order      â”‚
   â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                           â”‚                        â”‚  11. MongoDB
   â”‚                           â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                           â”‚                        â”‚         â”‚
   â”‚                           â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                           â”‚  12. Razorpay          â”‚
   â”‚  13. Payment              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
   â”‚                           â”‚                        â”‚


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DATABASE SCHEMA                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Order Collection
â”œâ”€â”€ _id (ObjectId)
â”œâ”€â”€ userId (String) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Clerk User ID
â”œâ”€â”€ type (String) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º "custom" | "regular"
â”œâ”€â”€ items (Array)
â”‚   â”œâ”€â”€ productId (ObjectId) â”€â–º null for custom
â”‚   â”œâ”€â”€ title (String) â”€â”€â”€â”€â”€â”€â”€â–º "Custom Frame - 12x18 Black"
â”‚   â”œâ”€â”€ price (Number) â”€â”€â”€â”€â”€â”€â”€â–º 1499
â”‚   â”œâ”€â”€ quantity (Number) â”€â”€â”€â”€â–º 1
â”‚   â””â”€â”€ imageUrl (String) â”€â”€â”€â”€â–º Cloudinary URL
â”œâ”€â”€ totalAmount (Number) â”€â”€â”€â”€â”€â–º 1499
â”œâ”€â”€ paymentStatus (String) â”€â”€â”€â–º "pending" | "completed" | "failed"
â”œâ”€â”€ paymentId (String)
â”œâ”€â”€ razorpayOrderId (String)
â”œâ”€â”€ razorpaySignature (String)
â”œâ”€â”€ address (Object)
â”‚   â”œâ”€â”€ fullName (String)
â”‚   â”œâ”€â”€ phone (String)
â”‚   â”œâ”€â”€ addressLine1 (String)
â”‚   â”œâ”€â”€ addressLine2 (String)
â”‚   â”œâ”€â”€ city (String)
â”‚   â”œâ”€â”€ state (String)
â”‚   â””â”€â”€ pincode (String)
â”œâ”€â”€ customFrame (Object) â”€â”€â”€â”€â”€â–º NEW FIELD
â”‚   â”œâ”€â”€ imageUrl (String) â”€â”€â”€â”€â–º Customer's uploaded image
â”‚   â”œâ”€â”€ frameStyle (String) â”€â”€â–º "Black" | "White" | "Wooden"
â”‚   â”œâ”€â”€ frameSize (String) â”€â”€â”€â–º "A4" | "12x18" | "18x24" | "24x36"
â”‚   â””â”€â”€ customerNotes (String)
â”œâ”€â”€ status (String) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º NEW FIELD
â”‚   â””â”€â”€ "Pending" | "Processing" | "Printed" | "Shipped" | "Delivered"
â”œâ”€â”€ createdAt (Date)
â””â”€â”€ updatedAt (Date)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPONENT HIERARCHY                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

App
â”œâ”€â”€ Layout
â”‚   â”œâ”€â”€ Navbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Added "Custom Frame" link
â”‚   â”œâ”€â”€ MobileNav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Added "Custom" tab
â”‚   â””â”€â”€ Footer
â”‚
â”œâ”€â”€ /custom-frame
â”‚   â””â”€â”€ CustomFramePage
â”‚       â”œâ”€â”€ Header Section
â”‚       â”œâ”€â”€ Preview Section
â”‚       â”‚   â”œâ”€â”€ Live Preview with Frame
â”‚       â”‚   â”œâ”€â”€ Upload Button
â”‚       â”‚   â””â”€â”€ Info Card
â”‚       â””â”€â”€ Customization Section
â”‚           â”œâ”€â”€ Size Selector (4 options)
â”‚           â”œâ”€â”€ Style Selector (3 options)
â”‚           â”œâ”€â”€ Notes Textarea
â”‚           â””â”€â”€ Add to Cart Button
â”‚
â””â”€â”€ /admin/custom-orders
    â””â”€â”€ AdminCustomOrdersPage
        â”œâ”€â”€ Header with Refresh
        â”œâ”€â”€ Stats Cards (5 statuses)
        â””â”€â”€ Orders List
            â””â”€â”€ Order Card (foreach order)
                â”œâ”€â”€ Image Preview + Download
                â”œâ”€â”€ Order Details
                â”œâ”€â”€ Customer Info
                â””â”€â”€ Status Dropdown


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API ENDPOINTS                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Upload Image
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /api/upload/custom              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Auth: Required (Clerk)               â”‚
â”‚ Input: FormData with file            â”‚
â”‚ Output: Cloudinary URL               â”‚
â”‚ Validation:                          â”‚
â”‚  â€¢ File type (PNG/JPG/WebP)          â”‚
â”‚  â€¢ File size (max 10MB)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Create Order
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /api/custom-frame-order         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Auth: Required (Clerk)               â”‚
â”‚ Input: Order data + custom frame     â”‚
â”‚ Output: Created order                â”‚
â”‚ Validation:                          â”‚
â”‚  â€¢ Required fields                   â”‚
â”‚  â€¢ Valid enum values                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Get All Orders
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /api/custom-frame-order          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Auth: Admin only                     â”‚
â”‚ Input: None                          â”‚
â”‚ Output: Array of custom orders       â”‚
â”‚ Filters: type = "custom"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Update Status
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PATCH /api/custom-frame-order/[id]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Auth: Admin only                     â”‚
â”‚ Input: New status                    â”‚
â”‚ Output: Updated order                â”‚
â”‚ Validation: Valid status enum        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY LAYERS                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Authentication
â”œâ”€â”€ Clerk JWT validation
â”œâ”€â”€ User session verification
â””â”€â”€ Unauthorized â†’ 401

Layer 2: Authorization
â”œâ”€â”€ Admin role check
â”œâ”€â”€ User metadata verification
â””â”€â”€ Forbidden â†’ 403

Layer 3: Input Validation
â”œâ”€â”€ File type whitelist
â”œâ”€â”€ File size limits
â”œâ”€â”€ Required field checks
â”œâ”€â”€ Enum validation
â””â”€â”€ Invalid input â†’ 400

Layer 4: Data Sanitization
â”œâ”€â”€ MongoDB ObjectId validation
â”œâ”€â”€ String escaping
â””â”€â”€ Type coercion

Layer 5: API Rate Limiting
â”œâ”€â”€ Cloudinary limits
â”œâ”€â”€ Request throttling
â””â”€â”€ Too many requests â†’ 429


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CLOUDINARY INTEGRATION                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Upload Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Client selects file               â”‚
â”‚    â†“                                 â”‚
â”‚ 2. Frontend validates                â”‚
â”‚    â†“                                 â”‚
â”‚ 3. FormData created                  â”‚
â”‚    â†“                                 â”‚
â”‚ 4. POST to /api/upload/custom        â”‚
â”‚    â†“                                 â”‚
â”‚ 5. Server validates again            â”‚
â”‚    â†“                                 â”‚
â”‚ 6. Upload to Cloudinary              â”‚
â”‚    Folder: framekart/custom-frames   â”‚
â”‚    Transform: 2000x2000 max          â”‚
â”‚    Quality: auto:good                â”‚
â”‚    â†“                                 â”‚
â”‚ 7. Secure URL returned               â”‚
â”‚    â†“                                 â”‚
â”‚ 8. Stored in order                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     STATE MANAGEMENT                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Zustand Cart Store
â”œâ”€â”€ items: CartItem[]
â”‚   â””â”€â”€ CartItem
â”‚       â”œâ”€â”€ _id
â”‚       â”œâ”€â”€ title
â”‚       â”œâ”€â”€ price
â”‚       â”œâ”€â”€ imageUrl
â”‚       â”œâ”€â”€ quantity
â”‚       â”œâ”€â”€ frame_size
â”‚       â”œâ”€â”€ frame_material
â”‚       â”œâ”€â”€ isCustom â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º NEW
â”‚       â””â”€â”€ customFrame â”€â”€â”€â”€â”€â”€â”€â–º NEW
â”‚           â”œâ”€â”€ uploadedImageUrl
â”‚           â”œâ”€â”€ frameStyle
â”‚           â”œâ”€â”€ frameSize
â”‚           â””â”€â”€ customerNotes
â”‚
â”œâ”€â”€ Actions
â”‚   â”œâ”€â”€ addItem()
â”‚   â”œâ”€â”€ removeItem()
â”‚   â”œâ”€â”€ updateQuantity()
â”‚   â”œâ”€â”€ clearCart()
â”‚   â”œâ”€â”€ getTotalPrice()
â”‚   â””â”€â”€ getTotalItems()
â”‚
â””â”€â”€ Persistence
    â””â”€â”€ localStorage (cart-storage)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PRICING LOGIC                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frame Size         Dimensions        Price (INR)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
A4                 8.3" Ã— 11.7"      â‚¹999
12x18              12" Ã— 18"         â‚¹1,499
18x24              18" Ã— 24"         â‚¹1,999
24x36              24" Ã— 36"         â‚¹2,999

Calculation:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Base Price = FRAME_PRICES[size]  â”‚
â”‚ Shipping = totalPrice > 2000     â”‚
â”‚            ? Free : â‚¹99          â”‚
â”‚ Total = Base Price + Shipping    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     RESPONSIVE BREAKPOINTS                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mobile              Tablet             Desktop
320px - 767px       768px - 1023px     1024px+
     â”‚                   â”‚                 â”‚
     â”œâ”€ Single column    â”œâ”€ 2 columns      â”œâ”€ 2-3 columns
     â”œâ”€ Mobile nav       â”œâ”€ Navbar         â”œâ”€ Full navbar
     â”œâ”€ Stacked layout   â”œâ”€ Grid layout    â”œâ”€ Grid layout
     â””â”€ Full width       â””â”€ Padded         â””â”€ Max-width

Tailwind Classes:
â”œâ”€â”€ sm:  (640px)
â”œâ”€â”€ md:  (768px)
â”œâ”€â”€ lg:  (1024px)
â””â”€â”€ xl:  (1280px)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ANIMATION TIMELINE                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Page Load:
0ms    â”‚ Header fades in (opacity 0 â†’ 1)
       â”‚
100ms  â”‚ Left panel slides in (x: -20 â†’ 0)
       â”‚
200ms  â”‚ Right panel slides in (x: 20 â†’ 0)
       â”‚
300ms  â”‚ Cards stagger in (delay: index * 50ms)

User Interaction:
Click  â”‚ Scale animation (1 â†’ 0.98 â†’ 1)
Hover  â”‚ Scale up (1 â†’ 1.05)
Select â”‚ Check mark animates in (scale: 0 â†’ 1)


This architecture ensures:
âœ… Scalability
âœ… Security
âœ… Performance
âœ… Maintainability
âœ… User Experience
